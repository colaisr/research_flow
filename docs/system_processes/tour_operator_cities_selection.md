# Системный процесс: Выбор городов для туроператора

## Назначение
Демонстрационный процесс из 5 шагов, показывающий все возможности:
- Использование переменных из предыдущих шагов
- Работу с инструментами (API/Database)
- Контекст вокруг переменных
- Цепочку зависимостей между шагами
- Разные типы промптов и анализа

## Процесс: "Подбор городов для туристического пакета"

### Шаг 1: "generate_cities"
**Название шага:** `generate_cities`

**Системный промпт:**
```
Ты помощник, который создает структурированные списки городов для туристических целей.
```

**Пользовательский промпт:**
```
Создай список из 8 популярных туристических городов мира. Для каждого города укажи:
1. Название города
2. Страну
3. Примерное население
4. Основной туристический сезон

Форматируй ответ как нумерованный список с четкой структурой.
```

**Модель:** gpt-4o-mini
**Температура:** 0.7
**Макс. токенов:** 600

---

### Шаг 2: "analyze_weather"
**Название шага:** `analyze_weather`

**Системный промпт:**
```
Ты эксперт по климатологии и туризму, специализирующийся на анализе погодных условий для путешествий.
```

**Пользовательский промпт:**
```
Ниже представлен список городов из предыдущего шага:

{generate_cities_output}

Для каждого города из этого списка проанализируй:
1. Климатические условия в текущий сезон
2. Среднюю температуру и осадки
3. Рекомендации по времени посещения (лучший месяц)
4. Погодные риски для туристов

Форматируй ответ так же, как исходный список (нумерованный список), сохраняя соответствие с городами.
```

**Модель:** gpt-4o-mini
**Температура:** 0.6
**Макс. токенов:** 1200

**Использует переменную:** `{generate_cities_output}` - вывод из шага 1

---

### Шаг 3: "evaluate_attractions"
**Название шага:** `evaluate_attractions`

**Системный промпт:**
```
Ты эксперт по туризму и достопримечательностям, специализирующийся на оценке туристической привлекательности городов.
```

**Пользовательский промпт:**
```
На основе списка городов и их климатических характеристик, оцени туристические достопримечательности.

Список городов:
{generate_cities_output}

Климатический анализ:
{analyze_weather_output}

Для каждого города определи:
1. Топ-3 главные достопримечательности
2. Уникальные особенности города (что делает его особенным)
3. Рекомендуемая длительность визита (дни)
4. Целевая аудитория (семьи, молодежь, пожилые, все)

Форматируй ответ как структурированный список, сохраняя соответствие с городами из исходного списка.
```

**Модель:** gpt-4o-mini
**Температура:** 0.7
**Макс. токенов:** 1500

**Использует переменные:** 
- `{generate_cities_output}` - вывод из шага 1
- `{analyze_weather_output}` - вывод из шага 2

---

### Шаг 4: "calculate_costs"
**Название шага:** `calculate_costs`

**Системный промпт:**
```
Ты финансовый аналитик туристической индустрии, специализирующийся на оценке стоимости путешествий.
```

**Пользовательский промпт:**
```
На основе всей собранной информации о городах, рассчитай примерную стоимость туристического пакета.

Исходная информация о городах:
{generate_cities_output}

Климатические данные:
{analyze_weather_output}

Информация о достопримечательностях:
{evaluate_attractions_output}

Для каждого города рассчитай:
1. Примерная стоимость проживания (средняя цена отеля 3-4 звезды за ночь)
2. Стоимость питания (средний чек в ресторане)
3. Стоимость транспорта (местный транспорт + такси)
4. Общая стоимость визита на рекомендуемое количество дней
5. Стоимость туристического пакета (проживание + питание + транспорт)

Форматируй ответ как таблицу или структурированный список с четкими цифрами.
```

**Модель:** gpt-4o-mini
**Температура:** 0.5
**Макс. токенов:** 1800

**Использует переменные:**
- `{generate_cities_output}` - вывод из шага 1
- `{analyze_weather_output}` - вывод из шага 2
- `{evaluate_attractions_output}` - вывод из шага 3

---

### Шаг 5: "final_recommendation"
**Название шага:** `final_recommendation`

**Системный промпт:**
```
Ты профессиональный туристический консультант, создающий комплексные рекомендации для туроператоров.
```

**Пользовательский промпт:**
```
На основе полного анализа городов, создай финальную рекомендацию для туроператора.

Исходный список городов:
{generate_cities_output}

Климатический анализ:
{analyze_weather_output}

Оценка достопримечательностей:
{evaluate_attractions_output}

Финансовый анализ:
{calculate_costs_output}

Создай комплексную рекомендацию, которая включает:

1. **ТОП-3 города для туристического пакета**
   - Обоснование выбора каждого города
   - Уникальное предложение для каждого

2. **Рекомендуемая комбинация городов**
   - Какой маршрут будет наиболее привлекательным
   - Логистика перемещения между городами

3. **Целевая аудитория и сезонность**
   - Для кого подходит каждый город
   - Лучшее время для посещения

4. **Финансовое предложение**
   - Примерная стоимость пакета
   - Рекомендации по ценообразованию

5. **Маркетинговые рекомендации**
   - Как позиционировать каждый город
   - Уникальные продающие точки

Форматируй отчет профессионально, используй заголовки, списки и четкую структуру. Отчет должен быть готов для использования туроператором.
```

**Модель:** gpt-4o-mini
**Температура:** 0.7
**Макс. токенов:** 2500

**Использует переменные:**
- `{generate_cities_output}` - вывод из шага 1
- `{analyze_weather_output}` - вывод из шага 2
- `{evaluate_attractions_output}` - вывод из шага 3
- `{calculate_costs_output}` - вывод из шага 4

---

## Что демонстрирует этот процесс:

### ✅ Цепочка зависимостей
- Шаг 1 → независимый (генерирует данные)
- Шаг 2 → зависит от шага 1
- Шаг 3 → зависит от шагов 1 и 2
- Шаг 4 → зависит от шагов 1, 2, 3
- Шаг 5 → зависит от всех предыдущих шагов (1, 2, 3, 4)

### ✅ Использование переменных
- Каждый шаг использует переменные из предыдущих шагов
- Переменные окружены контекстом (пояснительным текстом)
- Множественные переменные в одном промпте

### ✅ Разные типы анализа
- Генерация данных (шаг 1)
- Климатический анализ (шаг 2)
- Оценка достопримечательностей (шаг 3)
- Финансовые расчеты (шаг 4)
- Комплексная рекомендация (шаг 5)

### ✅ Разные настройки температуры
- Шаг 1: 0.7 (творческий, для генерации)
- Шаг 2: 0.6 (более структурированный)
- Шаг 3: 0.7 (баланс)
- Шаг 4: 0.5 (точные расчеты)
- Шаг 5: 0.7 (комплексный анализ)

### ✅ Результат
- Последний шаг (`final_recommendation`) автоматически становится результатом
- Содержит полный анализ и рекомендации для туроператора

---

## Пример использования инструментов (опционально)

Если нужно продемонстрировать работу с инструментами, можно добавить в шаг 2 или 4:

**Шаг 2 (с инструментом):**
```
Получи актуальную погоду для городов из {generate_cities_output} используя {weather_api}.

Для каждого города проанализируй...
```

**Шаг 4 (с инструментом):**
```
Получи актуальные цены на отели для городов из {generate_cities_output} используя {booking_api}.

На основе этих данных рассчитай...
```

Но для базовой демонстрации переменных можно обойтись без инструментов.

